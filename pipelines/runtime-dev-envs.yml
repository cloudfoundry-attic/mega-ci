groups:
- name: runtime-dev-envs
  jobs:
  - green-means-nothing-deployed-on-runtime1
  - green-means-nothing-deployed-on-runtime2

resources:
- name: every-15-minutes
  type: time
  source:
    interval: 15m

jobs:
- name: green-means-nothing-deployed-on-runtime1
  public: true
  plan:
  - get: every-15-minutes
    trigger: true
  - task: check-deployments
    config:
      platform: linux
      image: docker:///cloudfoundry/runtime-ci
      run:
        path: '/bin/bash'
        args:
          - '-c'
          - 'set -x; source ~/.bashrc; bosh -t micro.runtime1.cf-app.com deployments 2>&1 | grep "No deployments"'
      params:
        BOSH_USER: {{runtime_1_bosh_user}}
        BOSH_PASSWORD: {{runtime_1_bosh_password}}
- name: green-means-nothing-deployed-on-runtime2
  public: true
  plan:
  - get: every-15-minutes
    trigger: true
  - task: check-deployments
    config:
      platform: linux
      image: docker:///cloudfoundry/runtime-ci
      run:
        path: '/bin/bash'
        args:
          - '-c'
          - 'set -x; source ~/.bashrc; bosh -t micro.runtime2.cf-app.com deployments 2>&1 | grep "No deployments"'
      params:
        BOSH_USER: {{runtime_2_bosh_user}}
        BOSH_PASSWORD: {{runtime_2_bosh_password}}
